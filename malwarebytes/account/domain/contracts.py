from abc import ABCMeta, abstractmethod

from typing import Optional

from malwarebytes.account.domain.models import Email, Account, MSPAccount, AccountToInject, \
    AccountId


class AccountRepository(metaclass=ABCMeta):

    @abstractmethod
    def find(self, email: Email) -> Optional[MSPAccount]:
        """
        Find account by its email.

        Parameters
        ----------
        email: Email
            The Email to find.

        Returns
        -------
        Account
            Account found.

        Raises
        ------
        NotFoundError
            If the account is not found.
        """
        pass  # pragma: no cover

    @abstractmethod
    def update(self, account: AccountToInject) -> MSPAccount:
        """
        Updates or create an account.

        Parameter
        ---------
        account: Account
            The account to update or create.

        Returns
        -------
        MSPAccount
            MalwareBytes Account updated or created.
        """
        pass  # pragma: no cover

    @abstractmethod
    def get_license(self, msp_account_id: AccountId) -> MSPAccount:
        """
        Get License Key.

        Parameter
        ---------
        msp_account_id: AccountId
            The msp account id created.

        Returns
        -------
        MSPAccount
            MalwareBytes Account created.
        """
        pass  # pragma: no cover

    @abstractmethod
    def cancel(self, msp_account_id: AccountId) -> bool:
        """
        Cancel an account.

        Parameter
        ---------
        msp_account_id: AccountId
            The msp account id to cancel.

        Returns
        -------
        MSPAccount
            MalwareBytes Account canceled.
        """
        pass  # pragma: no cover

    @abstractmethod
    def suspend(self, msp_account_id: AccountId) -> bool:
        """
        Suspend an account.

        Parameter
        ---------
        msp_account_id: AccountId
            The msp account id to suspend.

        Returns
        -------
        MSPAccount
            MalwareBytes Account suspended.
        """
        pass  # pragma: no cover

    @abstractmethod
    def resume(self, msp_account_id: AccountId) -> bool:
        """
        Resume an account.

        Parameter
        ---------
        msp_account_id: AccountId
            The msp account id to resume.

        Returns
        -------
        MSPAccount
            MalwareBytes Account resumed.
        """
        pass  # pragma: no cover

    @abstractmethod
    def send_email(self, msp_account_id: AccountId) -> bool:
        """
        Resend invite Email.

        Parameter
        ---------
        msp_account_id: AccountId
            The msp account id to cancel.

        Returns
        -------
        """
        pass  # pragma: no cover
