from connect.eaas.core.responses import BackgroundResponse
from connect.client import ClientError


def approve_request(self) -> BackgroundResponse:
    """
    Approve request
    :param self:
    :return: BackgroundResponse
    """
    try:
        self.logger.info("Getting Activation Template and Approving the Request.")
        activation_template = self.get_subscription_activation_template()

        self.approve_request(
            self.request_data.id(),
            activation_template)

        self.logger.info(f"Purchase request approved with template {activation_template}.")
    except ClientError as ex:
        self.logger.error(f"There was the following error: {ex.errors}")
        raise

    return BackgroundResponse.done()
